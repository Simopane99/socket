import socket
import json

SERVER_IP = "127.0.0.1"
SERVER_PORT = 5005
BUFFER_SIZE = 1024

sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

while True:
    expression = input("Inserisci un'espressione (es: 3 + 4) o 'exit' per uscire: ")
    if expression.lower() == "exit":
        break

    message = json.dumps({"expression": expression})
    sock.sendto(message.encode(), (SERVER_IP, SERVER_PORT))

    data, _ = sock.recvfrom(BUFFER_SIZE)
    response = json.loads(data.decode())

    if "result" in response:
        print("Risultato:", response["result"])
    else:
        print("Errore:", response["error"])

sock.close()
